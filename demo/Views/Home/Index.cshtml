@using vdt.jquerydropdownlist.MVC

@model vdt.demo.Models.ExampleViewModel

@{
    ViewBag.Title = "Index";
}

<p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed lobortis, ipsum ut vulputate vestibulum, sem odio fermentum magna, sed ultricies sem purus et dolor. Aliquam dapibus felis magna, vitae ultrices sem posuere eu. Sed ante orci, dictum tincidunt eros quis, sagittis rutrum sem. Vivamus ac commodo est. Nunc gravida maximus ligula, quis dictum sem vestibulum eget. Sed vel facilisis lacus. Ut nisl mi, ultrices quis auctor iaculis, cursus quis lacus. Nullam lectus risus, faucibus non laoreet eget, bibendum vel ligula. Aenean at pharetra augue, sed consequat velit. Aenean tincidunt gravida semper. Quisque dictum ullamcorper sem non placerat.
</p>

@using (Html.BeginForm()) {
    <h2>Form test</h2>

    <div class="row site-spaced">
        <div class="col-3">
            @Html.JQueryDropdownlistFor(model => model.DemoProperty, new { @class = "my-class" })
        </div>

        <div class="col-3">
            <input type="submit" value="Submit" class="site-control" />
        </div>
    </div>
}

<div class="row site-spaced">
    <div class="col-3">
        @Html.JQueryDropdownlistFor(model => model.DemoProperty)
    </div>

    <div class="col-3">
        @Html.JQueryDropdownlistFor(model => model.DemoProperty, new { id = "objectbasedid", @class = "object-test-class my-class" })
    </div>

    <div class="col-3">
        @Html.JQueryDropdownlistFor(model => model.DemoProperty2, new Dictionary<string, object>() {
            { "class", "dictionary-test-class" },
            { "id", "dictionary-test-id" },
            { "data-multiselect", "true" },
            { "data-text-search", "true" }
        })
    </div>

    <div class="col-3">
        @Html.JQueryDropdownlistFor(model => (JQueryDropdownlist)model.DemoProperty)
    </div>
</div>

<div class="row site-spaced">
    <div class="col-3">
        <div id="my-dropdown-1" class="my-dropdown" data-field-name="my-dropdown-1" data-multiselect="false">
            <div data-value="1">This could be an option</div>
            <div data-value="2" data-selected="true">And this</div>
            <div data-value="3" data-selected="true">Number three</div>
            <div><strong>No value option</strong></div>
        </div>
    </div>

    <div class="col-3">
        <div id="my-dropdown-2" class="my-dropdown">
            <p data-value="1" data-selected="true">This could be an option</p>
            <p data-value="2" data-selected="true">And this</p>
            <div data-value="3" data-selected="true">How does even the child type not matter</div>
            <div data-selected="true">No value option</div>
        </div>
    </div>

    <div class="col-3">
        <div id="my-dropdown-3" class="my-dropdown" data-multiselect="true">
            <div data-value="1">This could be an option</div>
            <div data-value="2" data-selected="true">And this</div>
            <div data-value="3">Number three</div>
            <div><strong>No value option</strong></div>
        </div>
    </div>

    <div class="col-3">
        <ol id="my-dropdown-4" class="my-dropdown">
            <li data-value-test="1">This could be an option</li>
            <li data-value-test="2">And this</li>
            <li data-value-test="3">Number three</li>
            <li><strong>No value option</strong></li>
        </ol>
    </div>
</div>

<div class="row site-spaced">
    <div class="col-3">
        <div id="my-dropdown-5" class="my-dropdown" data-multiselect="true">
            <div data-select-all="true">Select all</div>
            <div data-value="1">This could be an option</div>
            <div data-value="2">And this</div>
            <div data-value="3">Number three</div>
            <div><strong>No value option</strong></div>
            <div>Another option 5</div>
            <div>Another option 6</div>
            <div>Another option 7</div>
            <div>Another option 8</div>
            <div>Another option 9</div>
            <div>Another option 10</div>
            <div>Another option 11</div>
            <div>Another option 12</div>
            <div>Another option 13</div>
            <div>Another option 14</div>
            <div>Another option 15</div>
        </div>
    </div>

    <div class="col-3">
        <div id="my-dropdown-6" class="my-dropdown" data-multiselect="true">
            <div>Select all</div>
            <div data-value="1">This could be an option</div>
            <div data-value="2">And this</div>
            <div data-value="3">Number three</div>
            <div><strong>No value option</strong></div>
        </div>
    </div>

    <div class="col-3">
        <div id="my-dropdown-7" class="my-dropdown" data-text-search="true">
            <div class="item" data-value="1">This could be an option</div>
            <div class="item" data-value="2">And this</div>
            <div class="item" data-value="3">Number three</div>
            <div class="footer">This is footer</div>
        </div>
    </div>

    <div class="col-3">
        <div id="my-dropdown-8" class="my-dropdown" data-multiselect="true" data-text-search="true">
            <div data-select-all="true">All</div>
            <div class="item" data-value="1">This could be an option</div>
            <div class="item" data-value="2">And this</div>
            <div class="item" data-value="3">Number three</div>
            <div class="footer">This is footer</div>
        </div>
    </div>
</div>

<p>
    Ut viverra nunc ac justo efficitur dictum. Proin ultricies laoreet nisl, vitae volutpat leo euismod sed. Mauris euismod ex ut dolor pharetra suscipit nec eget sapien. Quisque gravida sagittis pulvinar. Ut et porta sem, eget congue odio. Cras arcu velit, ultrices a placerat vel, feugiat sed diam. Pellentesque venenatis bibendum mi, at aliquet justo iaculis quis. Integer magna arcu, viverra ut semper non, placerat sed quam. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Quisque scelerisque eget lorem eu tempus.
</p>

<p>
    Nullam dignissim lectus in ante porta tempor. Etiam congue felis vitae risus condimentum vulputate eget eu dui. Praesent id convallis libero, vitae fermentum metus. Aliquam ullamcorper neque semper aliquet dignissim. Sed eget sem condimentum, bibendum nulla ut, rutrum ipsum. Vestibulum in justo sit amet ex eleifend fringilla. Suspendisse ut ultrices ante. Sed molestie nisi urna, eget gravida ex viverra nec. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Sed at lectus sed ex commodo porta.
</p>

@section scripts {
    <script type="text/javascript">
        $(function () {
            $('#my-dropdown-1').dropdownlist({
                multiselect: true
            });

            $('#my-dropdown-1').dropdownlist(function () {
                this.remove();
            });

            $('#my-dropdown-2').dropdownlist({
                isMultiselect: function () {
                    return true;
                },
                getFieldName: function () {
                    return 'my-field';
                }
            });

            $('#my-dropdown-3').dropdownlist({
                getFieldName: function () {
                    return 'a-field';
                }
            });

            $('#my-dropdown-4').dropdownlist({
                isMultiselect: function () {
                    return false;
                },
                getItemValue: function (item) {
                    return $(item).data('value-test')
                }
            });

            $('#my-dropdown-6').dropdownlist({
                getSelectAllItem: function (element) {
                    return $(element).children().first();
                }
            });

            $('#my-dropdown-8').dropdownlist({
                getItems: function (element) {
                    return $(element).children().not('.footer');
                }
            });

            // Create all other dropdown lists
            $('.my-dropdown').dropdownlist();

            $('.my-dropdown').on('dropdownlist.selectedItemsChanged', function () {
                $(this).dropdownlist(function (d) {
                    console.log(d.fieldName + ": " + d.getSelectedValues());
                });
            });
        });
    </script>
}
